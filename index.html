<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>FatCal</title>
        <meta name="viewport" content="width=device-width">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/style.min.css"/>

        <!-- JS -->
        <!--script type="text/javascript" src="components/requirejs/require.js" data-main="/js/main"></script -->
        <script type="text/javascript" src="/js/main.min.js"></script>

        <script type="text/x-emblem" id="fix">
        </script>

        <script type="text/x-emblem" id="external">
            div class="row event"
                div class="small-12 medium-8 medium-offset-2 panel"
                    p This event was created in FatCal by #{publisher.user.displayName}. Reply by clicking “Going”, “Maybe” or “No” below. That way #{publisher.user.firstname} will know that you if you are going or not. 

                    p Since you do not have FatCal yourself yet, you will have to write the details down yourself but we are working hard to be able to allow more users into FatCal. In the meantime, head over and sign up for a beta account on <a href="http://www.fatcal.com/" targer="_new">www.fatcal.com</a>

            if isNotEditing
                div class="row event"
                    div class="small-12 columns title"
                        == title
                div class="row event"
                    div class="small-12 columns time"
                        = when
                div class="row event"
                    div class="small-12 columns description"
                        = description
                div class="row event"
                    div class="small-12 columns people"
                        | People
                div class="row event"
                    div class="small-12 medium-9 medium-offset-3 columns avatar-column"
                        img.avatar src=publisher.user.avatar
                        = publisher.user.displayName 
                        |&nbsp;(Going)                     
                    each attendees                   
                        div class="small-12 medium-9 medium-offset-3 columns avatar-column"
                            img.avatar src=calendar.user.avatar
                            = calendar.user.displayName
                            |&nbsp;(#{hrStatus})
                if isAttendee                
                    div class="row event" style="margin-bottom: 30px;"
                        div class="small-12 medium-12 columns end status"
                            = radio-button id="attendingStatus1" name="attendingStatus" selectionBinding="attendingStatusSelected" value="2" 
                            label for="attendingStatus1" Attending
                            = radio-button id="attendingStatus2" name="attendingStatus" selectionBinding="attendingStatusSelected" value="3" 
                            label for="attendingStatus2" Maybe
                            = radio-button id="attendingStatus3" name="attendingStatus" selectionBinding="attendingStatusSelected" value="4" 
                            label for="attendingStatus3" No

                div class="row event"
                    div{bind-attr class=":small-12 :medium-8 :medium-offset-2 :panel :callout showHero:visible:hidden"}
                        p{bind-attr class="showAttendingHero:visible:hidden"} 
                            |#{publisher.user.firstname} will be real happy that you have decided to go!
                        p{bind-attr class="showMaybeHero:visible:hidden"}
                            |Ok so you haven't decided yet but we both know that 'maybe' is just the polite way of saying that you don't really want to go and is holding out for something better.
                        p{bind-attr class="showRejectHero:visible:hidden"}
                            |Not going. #{publisher.user.firstname} will be sad that you're not coming but happy to know at least. That's always something.
                // div class="row event-controls"
                //     div class="col-md-4"
                //         button.btn.btn-default click="edit" Edit
                //         button.btn.btn-primary click="back" Back
                div class="row event"
                    div class="small-12 medium-8 medium-offset-2 panel"
                        p FatCal is a new tool for organizing your own time and plan events with people you care about. FatCal is developed in Stockholm and we are currently testing it among early adopters around Sweden. 

                        p Read more about us at <a href="http://www.fatcal.com" target="_new">www.fatcal.com</a>

            // else
            //     = partial 'event/edit'

        </script>

        <script type="text/x-emblem" id="event/_edit">
            .row
                form.form-horizontal
                    .form-group
                        label.col-md-1.control-label Title
                        .col-md-5
                            = input class='form-control' type="text" value=title
                    .form-group
                        label.col-md-1.control-label Starts
                        .col-md-3
                            Ember.PickADate valueBinding="content.date" class="form-control" value=startDate
                        .col-md-2
                            Ember.PickATime valueBinding="content.date" class="form-control" value=startTime interval=5
                    .form-group
                        label.col-md-1.control-label Ends
                        .col-md-3
                            Ember.PickADate valueBinding="content.date" class="form-control" value=endDate
                        .col-md-2
                            Ember.PickATime valueBinding="content.date" class="form-control" value=endTime interval=5
                    .form-group
                        label.col-md-1.control-label Notes
                        .col-md-5   
                            = textarea class="form-control" rows="4" value=description

            .row.event-controls
                .col-md-3.col-md-offset-1
                    button.btn.btn-default click="onCancelClick" Cancel
                    button.btn.btn-success click="onUpdateClick" Update
        </script>

        <script type="text/x-emblem" id="events">
            div.row
                div.columns.small-12
                    h1 Upcoming
            div.row
                div.columns.small-12
                    table style="text-align: left;"
                        tbody
                            each
                                link-to 'event' this tagName='tr'
                                    td
                                        = when
                                    td
                                        = title
        </script>  

        <script type="text/x-emblem" id="index">
            div.row
                div.columns.small-12 style="font-size:100pt;padding-top:24px"
                    |RAFT


        </script> 

        <script type="text/x-emblem" id="dashboard">
            br
            div.row
                div.columns.small-12
                    div.panel.callout.radius
                        |Welcome #{App.me.firstname}
        </script>

        <script type="text/x-emblem" id="application">
            nav.top-bar data-topbar=""
                ul.title-area
                    li.name
                        h1 
                            link-to 'index' | Raft
                section.top-bar-section
                    ul.right
                        if session.isAuthenticated
                            li
                                link-to 'events' | Upcoming
                            li
                                link-to 'apps' | Apps
                            li
                                link-to 'dashboard' | Dashboard
                            li.has-dropdown.not-click
                                a href="#"
                                    img.avatar-small src=App.me.avatar
                                    |#{App.me.firstname} #{App.me.lastname}
                                ul.dropdown
                                    li
                                        a click="logout" Logout 
                        else
                            li.active
                                a click="login" Login 
 
            div {{outlet}}
        </script>

        <script type="text/x-emblem" id="apps">
            div.row
                div.small-12 
                    h1 Applications
            div.row
                div.columns.small-12
                    table
                        tbody             
                            each app in controller
                                link-to 'app' app tagName='tr'
                                    td
                                        img.avatar-small src=app.logo     
                                    td
                                        = app.name
        </script>

        <script type="text/x-emblem" id="app">
            div.row
                div.columns.small-12
                    h1 = controller.name
            div.row
                div.columns.small-12
                    table style="text-align: left;"
                        tbody
                            each e in evnts
                                link-to 'event.edit' e tagName='tr'
                                    td
                                        = e.when
                                    td
                                        = e.title

        </script>

        <script type="text/x-emblem" id="event/edit">
            div.row class="editEvent"
                div.columns.small-12
                    label 
                        |Title
                        = input type="text" value=title
                div.columns.small-12
                    label
                        |Description
                        = textarea value=description 
                div.columns.small-12
                    button{action 'save'} Save
        </script>

    </head>
    <body> 
        <section id="ember"></section>
        <div id="fb-root"></div>
    </body>
</html>
